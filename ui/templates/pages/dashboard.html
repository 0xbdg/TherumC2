{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block contents %}
<div class="container">
    <div class="world">
        <div id="vmap"></div>
    </div>
    <div class="status">
        <div class="status-box">
            <div class="box">
                <p>AGENT</p>
                <p>10</p>
            </div>
            <div class="box">
                <p>AGENT</p>
                <p>10</p>
            </div>
            <div class="box">
                <p>AGENT</p>
                <p>10</p>
            </div>
        </div>
        <div class="activity">
            <div class="over">
                <table class="table-act">
                    <thead>
                        <tr>
                            <th>Agent activity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>[*] Server started (127.0.0.1:5000)</td> 
                        </tr> 
                        <tr>
                            <td>[+] Agent [ID] has been added on database</td> 
                        </tr>
                        <tr>
                            <td>[-] Agent [ID] has been remove on database</td> 
                        </tr>
                        <tr>
                            <td>[!] Agent [ID] has been disconnected from server</td> 
                        </tr> 
                        <tr>
                            <td>[-] Agent [ID] has been remove on database</td> 
                        </tr>
                        <tr>
                            <td>[!] Agent [ID] has been disconnected from server</td> 
                        </tr> 
                        <tr>
                            <td>[+] Agent [ID] has been added on database</td> 
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div style="display: grid;">
    <table class="agent-table">
        <tr class="border-b">
            <th>HOSTNAME</th>
            <th>IP ADDRESS</th>
            <th>REGION</th>
            <th>OS</th>
            <th>UPTIME</th>
            <th>ACTION</th>
        </tr>
        {% for agent_id,bot in bots.items() %}
            {{agent_id}}
            <tr>
                <td>{{ bot.Hostname }}</td>
                <td>{{ bot.Address }}</td>
                <td>{{ bot.Region }}</td>
                <td>{{ bot.OS}}</td>
                <td>{{ bot.last_check}}</td>
                <td>
                    <button onclick=""><i class="fa-solid fa-rotate-right"></i></button>
                    <button onclick=""><i class="fa-solid fa-folder"></i></button>
                    <button class="bg-gray-100" onclick="location.href='{{ url_for('main.console', agent_id=agent_id) }}';"><i class="fa-solid fa-terminal"></i></button>
                </td> 
            </tr> 
        {% endfor %}  
    </table>
</div>

<script type="text/javascript">
jQuery('#vmap').vectorMap(
{
    map: 'world_en',
    backgroundColor: '#a5bfdd',
    borderColor: '#818181',
    borderOpacity: 0.25,
    borderWidth: 1,
    color: '#f4f3f0',
    enableZoom: true,
    hoverColor: '#c9dfaf',
    hoverOpacity: null,
    normalizeFunction: 'linear',
    scaleColors: ['#b6d6ff', '#005ace'],
    selectedColor: '#c9dfaf',
    selectedRegions: null,
    showTooltip: true,
    onRegionClick: function(element, code, region)
    {
        var message = 'You clicked "'
            + region
            + '" which has the code: '
            + code.toUpperCase();

        alert(message);
    }
});
</script>
{% endblock %}
